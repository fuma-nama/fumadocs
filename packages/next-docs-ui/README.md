# Next Docs UI

The Next.js framework for building documentation website.

It's build on the top of Next.js, Radix UI and **Next Docs**, fully styled using Tailwind CSS.

## Features

Next Docs UI provides many features out of the box.

-   Light/Dark Mode
-   Full-text Search
-   Table of Contents
-   Built-in Components
-   Code Syntax highlighting powered by Shiki
-   Well Designed UI & Accessibility

**Moreover:**

-   Built for App Router
-   Great Flexibility
-   Light & Fast

## Usage

Next Docs UI doesn't provide static generation directly. Instead, it uses [Contentlayer](https://www.contentlayer.dev).

```bash
pnpm add contentlayer next-contentlayer
```

**Configure Contentlayer**

You can customise the default configuration.

> in `contentlayer.config.ts`

```ts
import { createConfig } from "next-docs-ui/contentlayer";
import { makeSource } from "contentlayer/source-files";

export default makeSource({
    ...createConfig(),
});
```

**Add Contentlayer Plugin**

> in `next.config.js`

```js
/** @type {import('next').NextConfig} */
const config = {
    reactStrictMode: true,
};

const { withContentlayer } = require("next-contentlayer");

module.exports = withContentlayer(config);
```

Make sure you've generated documents correctly before moving to next step.

### Creating Routes

<details>
  <summary>Root Layout</summary>
  
> in `app/layout.tsx`

```tsx
import { DocsLayout } from "next-docs-ui/layout";
import { tree } from "./tree";
import { Inter } from "next/font/google";
import type { Metadata } from "next";

import "next-docs-ui/style.css";

export const metadata: Metadata = {
    title: {
        default: "My App",
        template: "My App | %s",
    },
    description: "Generated by Next.js",
};

const inter = Inter({
    subsets: ["latin"],
});

export default function RootLayout({
    children,
}: {
    children: React.ReactNode;
}) {
    return (
        <html lang="en" className={inter.className}>
            <body
                style={{
                    minHeight: "100vh",
                }}
            >
                <DocsLayout tree={tree} navTitle="My App">
                    {children}
                </DocsLayout>
            </body>
        </html>
    );
}
```

</details>

<details>
  <summary>Docs Page</summary>

> in `app/docs/[[...slug]]/page.tsx`

```tsx
import { DocsPage } from "next-docs-ui/page";
import {
    Heading,
    Image,
    Pre,
    Link,
    Table,
    MDXContent,
    Card,
    Cards,
} from "next-docs-ui/mdx";
import { getTableOfContents } from "next-docs-zeta/server";
import { allDocs } from "contentlayer/generated";
import { notFound } from "next/navigation";
import { tree } from "../tree";
import { getMDXComponent } from "next-contentlayer/hooks";
import type { Metadata } from "next";

export default async function Page({
    params,
}: {
    params: { slug?: string[] };
}) {
    const path = (params.slug ?? []).join("/");
    const page = allDocs.find((page) => page.slug === path);

    if (page == null) {
        notFound();
    }

    const toc = await getTableOfContents(page.body.raw);
    const MDX = getMDXComponent(page.body.code);

    // We don't provide MDX components by default
    return (
        <DocsPage toc={toc} tree={tree}>
            <MDXContent>
                <h1>{page.title}</h1>
                <MDX
                    components={{
                        table: (props) => <Table {...props} />,
                        pre: (props) => <Pre {...props} />,
                        a: (props) => <Link {...props} />,
                        h1: (props) => <Heading as="h1" {...props} />,
                        h2: (props) => <Heading as="h2" {...props} />,
                        h3: (props) => <Heading as="h3" {...props} />,
                        h4: (props) => <Heading as="h4" {...props} />,
                        h5: (props) => <Heading as="h5" {...props} />,
                        h6: (props) => <Heading as="h6" {...props} />,
                        img: (props) => <Image {...props} />,
                        Card: (props) => <Card {...props} />,
                        Cards: (props) => <Cards {...props} />,
                    }}
                />
            </MDXContent>
        </DocsPage>
    );
}

export async function generateStaticParams(): Promise<{ slug: string[] }[]> {
    return allDocs.map((docs) => ({
        slug: docs.slug.split("/"),
    }));
}
```

</details>

<details>
    <summary>Not Found Page</summary>

> in `app/docs/[[...slug]]/not-found.tsx`

```tsx
export { default } from "next-docs-ui/not-found";
```

</details>

<details>
    <summary>Search API Route</summary>

> in `app/api/search/route.ts`

```tsx
import { allDocs } from "contentlayer/generated";
import { initSearchAPI } from "next-docs-zeta/server";

export const { GET } = initSearchAPI(
    allDocs.map((docs) => ({
        title: docs.title,
        content: docs.body.raw,
        url: docs.url,
    }))
);
```

</details>

## Advanced

### Customise Theme

The theme is based on Shadcn UI, you may overwrite the css variables.

```css
:root {
    --background: 0 0% 100%;
    --foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 47.4% 11.2%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 47.4% 11.2%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;

    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 100% 50%;
    --destructive-foreground: 210 40% 98%;

    --ring: 215 20.2% 65.1%;

    --radius: 0.5rem;
}
```
